# ==============================================
# N8N DASHBOARD BACKEND CONFIGURATION
# ==============================================

# ----------------------------------------------
# SERVER CONFIGURATION
# ----------------------------------------------
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# ----------------------------------------------
# DATABASE - NEON DB (Serverless PostgreSQL)
# ----------------------------------------------
# Get your connection string from: https://neon.tech
# Format: postgresql://user:password@host/database?sslmode=require
DATABASE_URL=postgresql://user:password@ep-xxx-xxx.us-east-2.aws.neon.tech/n8n_dashboard?sslmode=require

# ----------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------
# Redis connection URL for caching and sessions
# Format: redis://username:password@host:port
REDIS_URL=redis://default:password@your-redis-host:6379

# ----------------------------------------------
# AUTHENTICATION & SECURITY
# ----------------------------------------------
# Secret key for JWT token signing (CHANGE THIS IN PRODUCTION!)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=12h
JWT_REFRESH_EXPIRES_IN=7d

# bcrypt password hashing rounds (10-12 recommended)
BCRYPT_ROUNDS=12

# ----------------------------------------------
# USERS CONFIGURATION
# ----------------------------------------------
# Define users as a JSON array. Each user object should have:
# - username: string (required)
# - password: string (required, min 8 characters)
# - email: string (optional)
# - plan: string (optional, defaults to 'free'. Options: 'free', 'pro', 'enterprise')
#
# Example with multiple users:
# USERS=[{"username":"admin","password":"password123","email":"admin@nexdevs.com","plan":"enterprise"},{"username":"user1","password":"pass123456","email":"user1@example.com","plan":"free"}]
#
# Example with single user:
USERS=[{"username":"alihasnaat","password":"password123","email":"admin@nexdevs.com","plan":"enterprise"}]

# Admin Panel Password - Required to access /nexdev user management page
# CHANGE THIS IN PRODUCTION!
ADMIN_PANEL_PASSWORD=your-secure-admin-panel-password


# ----------------------------------------------
# N8N CONFIGURATION
# ----------------------------------------------
# Your n8n instance base URL
N8N_BASE_URL=https://your-n8n-instance.com

# n8n API key (if using n8n API endpoints)
N8N_API_KEY=your-n8n-api-key

# Allowed webhook domains (comma-separated for security)
N8N_WEBHOOK_DOMAIN_WHITELIST=https://your-n8n-instance.com,https://n8n.nexdevs.com

# ----------------------------------------------
# EMAIL SERVICE (Optional - for form notifications)
# ----------------------------------------------
# SMTP configuration for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email addresses for notifications
SUPPORT_EMAIL_ALI=ali@nexdevs.com
SUPPORT_EMAIL_HASSAM_FAIZAN=support@nexdevs.com
SUPPORT_EMAIL_MUDASSIR_USMAN=tech@nexdevs.com

# ----------------------------------------------
# CORS & SECURITY
# ----------------------------------------------
# Allowed origins for CORS (comma-separated)
CORS_ORIGIN=http://localhost:5174,https://yourdomain.com

# Allowed IP addresses (comma-separated, or * for all)
ALLOWED_IPS=*

# ----------------------------------------------
# RATE LIMITING
# ----------------------------------------------
# General API rate limit
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Auth endpoint rate limit
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=20


# Form submission rate limit
FORM_RATE_LIMIT_WINDOW_MS=3600000
FORM_RATE_LIMIT_MAX_REQUESTS=10

# ----------------------------------------------
# LOGGING
# ----------------------------------------------
LOG_LEVEL=info
LOG_FILE_PATH=./logs

# ----------------------------------------------
# FRONTEND URL
# ----------------------------------------------
FRONTEND_URL=http://localhost:5174

# ----------------------------------------------
# OPTIONAL: WEBHOOK SECRET FOR VERIFICATION
# ----------------------------------------------
# Shared secret with n8n for webhook signature verification
WEBHOOK_SECRET=your-webhook-secret-key
